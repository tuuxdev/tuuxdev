/* ===========================================================================
 * WELLCOME LANGUAGE
 * ==========================================================================*/
$('.wellcome-language a.wellcome-langswitch').click(function () {
  $(".wellcome-language").fadeOut(1200);
  $(".langswitch").removeClass("active");
  if ($(this).hasClass("wellcome-en_EN")) {
    $(".langswitch.en_EN").addClass("active");
  } else if ($(this).hasClass("wellcome-es_ES")) {
    $(".langswitch.es_ES").addClass("active");
  }
  $("body").css({
    overflow: 'auto'
  });
});
/* ===========================================================================
 * PORTFOLIO VENOBOX
 * ==========================================================================*/

$('.venobox').venobox({
  framewidth: '80%',
  frameheight: 'auto',
  border: '10px',
  titleattr: 'data-title',
  numeratio: true,
  infinigall: true,
  overlayClose: false,
});

/* ===========================================================================
 * LANGUAGE SWITCHER
 * ==========================================================================*/
document.addEventListener("DOMContentLoaded", function () {
  document.body.classList.add('en');
});

function langSwitcher(selector, show, hide) {
  "use strict";
  var btn = document.querySelector(selector);
  var body = document.body;

  btn.addEventListener("click", function () {
    body.classList.remove(hide);
    body.classList.add(show);
    Cookies.set('lang', show);
  });
}

langSwitcher('.es_ES', 'es', 'en');
langSwitcher('.en_EN', 'en', 'es');
langSwitcher('.wellcome-es_ES', 'es', 'en');
langSwitcher('.wellcome-en_EN', 'en', 'es');

// ACTIVE CLASS

function navActiveClass(selector, activeClass) {
  "use strict";
  var items = Array.from(document.querySelectorAll(selector));

  var handleClick = function remover(e) {
    e.preventDefault();
    items.forEach(function (node) {
      node.classList.remove(activeClass);
    });
    e.currentTarget.classList.add(activeClass);
  };

  items.forEach(function (node) {
    node.addEventListener('click', handleClick);
  });
}
navActiveClass('.langswitch', 'active');

/* ===========================================================================
 * PARALLAX
 * ==========================================================================*/

var rellax = new Rellax('.parallax_fx');

// if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
//   rellax.destroy();
//  }

/* ===========================================================================
 * SMOOTH SCROLL
 * ==========================================================================*/

$(document).on('click', 'a[href^="#"]', function (event) {
  event.preventDefault();

  $('html, body').animate({
    scrollTop: $($.attr(this, 'href')).offset().top
  }, 500);
});

/* ===========================================================================
 * THEME SHITCH
 * ==========================================================================*/

const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
const currentTheme = localStorage.getItem('theme');
const body = document.getElementsByTagName('body')[0];

if (currentTheme) {
  document.documentElement.setAttribute('data-theme', currentTheme);

  if (currentTheme === 'dark') {
    toggleSwitch.checked = true;
  }
}

function switchTheme(e) {
  if (e.target.checked) {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
  } else {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
  }
}

toggleSwitch.addEventListener('change', switchTheme, false);